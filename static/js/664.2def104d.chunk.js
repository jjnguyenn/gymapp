"use strict";(self.webpackChunkgym_buddy=self.webpackChunkgym_buddy||[]).push([[664],{664:(e,s,t)=>{t.r(s),t.d(s,{default:()=>c});var r=t(43),l=t(447),a=t(472),d=t(948),o=t(579);const c=function(){const{user:e,isAuthenticated:s}=(0,l.WB)(),[t,c]=(0,r.useState)(""),[n,i]=(0,r.useState)(""),[m,u]=(0,r.useState)(""),[h,x]=(0,r.useState)([]);(0,r.useEffect)((()=>{if(s&&e)p();else{const e=localStorage.getItem("personalRecords");e&&x(JSON.parse(e))}}),[s,e]);const p=async()=>{const s=(0,a.rJ)(d.A,"personal_records"),t=(0,a.P)(s,(0,a._M)("userId","==",e.sub),(0,a.My)("timestamp","desc")),r=await(0,a.GG)(t),l=[];r.forEach((e=>{l.push({id:e.id,...e.data()})})),x(l)};return(0,o.jsxs)("div",{className:"max-w-xl mx-auto p-6 bg-white dark:bg-gray-800 rounded-lg shadow-md mt-8 space-y-6",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold text-teal-600",children:"Personal Record"}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{children:[!s&&(0,o.jsxs)("div",{className:"bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 mb-4 rounded-md",children:[(0,o.jsx)("p",{className:"font-semibold",children:"You are not logged in."}),(0,o.jsx)("p",{className:"text-sm",children:"Your workouts will be saved locally but not to the cloud."})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"text-teal-700 block mb-1",children:"Exercise"}),(0,o.jsx)("input",{type:"text",value:t,onChange:e=>{const s=e.target.value;/^[a-zA-Z\s]*$/.test(s)&&c(s)},className:"w-full border rounded p-2",placeholder:"e.g., Bench Press"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"text-teal-700 block mb-1",children:"Weight (lbs or kg)"}),(0,o.jsx)("input",{type:"number",value:n,onChange:e=>i(e.target.value),className:"w-full border rounded p-2",placeholder:"e.g., 150"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"text-teal-700 block mb-1",children:"Reps"}),(0,o.jsx)("input",{type:"number",value:m,onChange:e=>u(e.target.value),className:"w-full border rounded p-2",placeholder:"e.g., 12"})]}),(0,o.jsx)("button",{onClick:async()=>{const r={exercise:t,weight:n,reps:m,timestamp:new Date};if(s&&e)try{const s=await(0,a.gS)((0,a.rJ)(d.A,"personal_records"),{...r,userId:e.sub});x((e=>[{id:s.id,...r},...e]))}catch(l){console.error("Error saving record:",l),alert("Error saving record.")}else{const e=[{id:Date.now(),...r},...h];x(e),localStorage.setItem("personalRecords",JSON.stringify(e))}c(""),i(""),u("")},className:"w-full bg-teal-600 text-white p-2 rounded",children:"Save Record"})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("h3",{className:"text-xl font-semibold text-teal-600",children:"Saved Records"}),h.length>0&&(0,o.jsx)("button",{onClick:async()=>{if(window.confirm("Are you sure you want to delete all personal records?"))if(s&&e)try{const s=(0,a.P)((0,a.rJ)(d.A,"personal_records"),(0,a._M)("userId","==",e.sub)),t=(await(0,a.GG)(s)).docs.map((e=>(0,a.kd)((0,a.H9)(d.A,"personal_records",e.id))));await Promise.all(t),x([])}catch(t){console.error("Error deleting records:",t),alert("Error deleting records.")}else localStorage.removeItem("personalRecords"),x([])},className:"text-sm text-red-500 hover:underline",children:"Clear All"})]}),(0,o.jsx)("div",{className:"space-y-4 mt-4",children:h.length>0?h.map((e=>{var s;return(0,o.jsxs)("div",{className:"bg-gray-100 p-4 rounded-lg shadow-md",children:[(0,o.jsx)("div",{className:"text-teal-700 font-semibold",children:e.exercise}),(0,o.jsxs)("div",{className:"text-teal-500",children:["Weight: ",e.weight," | Reps: ",e.reps]}),(0,o.jsx)("div",{className:"text-sm text-gray-500",children:new Date(null!==(s=e.timestamp)&&void 0!==s&&s.seconds?1e3*e.timestamp.seconds:e.timestamp).toLocaleString()})]},e.id)})):(0,o.jsx)("p",{children:"No records found"})})]})]})]})}}}]);
//# sourceMappingURL=664.2def104d.chunk.js.map