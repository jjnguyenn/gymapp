"use strict";(self.webpackChunkgym_buddy=self.webpackChunkgym_buddy||[]).push([[664],{664:(e,s,t)=>{t.r(s),t.d(s,{default:()=>n});var r=t(43),a=t(447),l=t(472),d=t(948),c=t(579);const n=function(){const{user:e,isAuthenticated:s}=(0,a.WB)(),[t,n]=(0,r.useState)(""),[o,i]=(0,r.useState)(""),[u,m]=(0,r.useState)(""),[h,x]=(0,r.useState)([]);(0,r.useEffect)((()=>{s&&e&&p()}),[s,e]);const p=async()=>{const s=(0,l.rJ)(d.A,"personal_records"),t=(0,l.P)(s,(0,l._M)("userId","==",e.sub),(0,l.My)("timestamp","desc")),r=await(0,l.GG)(t),a=[];r.forEach((e=>{a.push({id:e.id,...e.data()})})),x(a)};return(0,c.jsxs)("div",{className:"max-w-xl mx-auto p-6 bg-white dark:bg-gray-800 rounded-lg shadow-md mt-8 space-y-6",children:[(0,c.jsx)("h2",{className:"text-2xl font-bold text-teal-600",children:"Personal Record"}),(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"text-teal-700 block mb-1",children:"Exercise"}),(0,c.jsx)("input",{type:"text",value:t,onChange:e=>{const s=e.target.value;/^[a-zA-Z\s]*$/.test(s)&&n(s)},className:"w-full border rounded p-2",placeholder:"e.g., Bench Press"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"text-teal-700 block mb-1",children:"Weight (lbs or kg)"}),(0,c.jsx)("input",{type:"number",value:o,onChange:e=>i(e.target.value),className:"w-full border rounded p-2",placeholder:"e.g., 150"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"text-teal-700 block mb-1",children:"Reps"}),(0,c.jsx)("input",{type:"number",value:u,onChange:e=>m(e.target.value),className:"w-full border rounded p-2",placeholder:"e.g., 12"})]}),(0,c.jsx)("button",{onClick:async()=>{if(e)try{const s=await(0,l.gS)((0,l.rJ)(d.A,"personal_records"),{userId:e.sub,exercise:t,weight:o,reps:u,timestamp:new Date});console.log("Document written with ID: ",s.id),n(""),i(""),m(""),x((e=>[{id:s.id,exercise:t,weight:o,reps:u,timestamp:new Date},...e]))}catch(s){console.error("Error saving record:",s),alert("Error saving record.")}},className:"w-full bg-teal-600 text-white p-2 rounded",children:"Save Record"})]}),(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"flex justify-between items-center",children:[(0,c.jsx)("h3",{className:"text-xl font-semibold text-teal-600",children:"Saved Records"}),h.length>0&&(0,c.jsx)("button",{onClick:async()=>{if(window.confirm("Are you sure you want to delete all personal records?")&&e)try{const s=(0,l.P)((0,l.rJ)(d.A,"personal_records"),(0,l._M)("userId","==",e.sub)),t=(await(0,l.GG)(s)).docs.map((e=>(0,l.kd)((0,l.H9)(d.A,"personal_records",e.id))));await Promise.all(t),x([])}catch(s){console.error("Error deleting records:",s),alert("Error deleting records.")}},className:"text-sm text-red-500 hover:underline",children:"Clear All"})]}),(0,c.jsx)("div",{className:"space-y-4 mt-4",children:h.length>0?h.map((e=>{var s;return(0,c.jsxs)("div",{className:"bg-gray-100 p-4 rounded-lg shadow-md",children:[(0,c.jsx)("div",{className:"text-teal-700 font-semibold",children:e.exercise}),(0,c.jsxs)("div",{className:"text-teal-500",children:["Weight: ",e.weight," | Reps: ",e.reps]}),(0,c.jsx)("div",{className:"text-sm text-gray-500",children:new Date(null!==(s=e.timestamp)&&void 0!==s&&s.seconds?1e3*e.timestamp.seconds:e.timestamp).toLocaleString()})]},e.id)})):(0,c.jsx)("p",{children:"No records found"})})]})]})}}}]);
//# sourceMappingURL=664.d69ad7d3.chunk.js.map