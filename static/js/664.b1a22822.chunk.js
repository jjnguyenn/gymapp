"use strict";(self.webpackChunkgym_buddy=self.webpackChunkgym_buddy||[]).push([[664],{664:(e,s,r)=>{r.r(s),r.d(s,{default:()=>c});var t=r(43),a=r(447),l=r(472),d=r(948),o=r(579);const c=function(){const{user:e,isAuthenticated:s}=(0,a.WB)(),[r,c]=(0,t.useState)(""),[n,i]=(0,t.useState)(""),[m,u]=(0,t.useState)(""),[h,x]=(0,t.useState)([]);(0,t.useEffect)((()=>{if(s&&e)p();else{const e=localStorage.getItem("personalRecords");e&&x(JSON.parse(e))}}),[s,e]);const p=async()=>{const s=(0,l.rJ)(d.A,"personal_records"),r=(0,l.P)(s,(0,l._M)("userId","==",e.sub),(0,l.My)("timestamp","desc")),t=await(0,l.GG)(r),a=[];t.forEach((e=>{a.push({id:e.id,...e.data()})})),x(a)};return(0,o.jsxs)("div",{className:"max-w-xl mx-auto p-6 bg-white dark:bg-gray-800 rounded-lg shadow-md mt-8 space-y-6",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold text-teal-600",children:"Personal Record"}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"bg-white dark:bg-gray-900 border dark:border-gray-700 rounded-xl shadow-lg p-6 transition-all",children:[!s&&(0,o.jsxs)("div",{className:"bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 mb-4 rounded-md",children:[(0,o.jsx)("p",{className:"font-semibold",children:"You are not logged in."}),(0,o.jsx)("p",{className:"text-sm",children:"Your workouts will be saved locally but not to the cloud."})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"text-teal-700 block mb-1",children:"Exercise"}),(0,o.jsx)("input",{type:"text",value:r,onChange:e=>{const s=e.target.value;/^[a-zA-Z\s]*$/.test(s)&&c(s)},className:"w-full border rounded p-2",placeholder:"e.g., Bench Press"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"text-teal-700 block mb-1",children:"Weight (lbs or kg)"}),(0,o.jsx)("input",{type:"number",value:n,onChange:e=>i(e.target.value),className:"w-full border rounded p-2",placeholder:"e.g., 150"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"text-teal-700 block mb-1",children:"Reps"}),(0,o.jsx)("input",{type:"number",value:m,onChange:e=>u(e.target.value),className:"w-full border rounded p-2",placeholder:"e.g., 12"})]}),(0,o.jsx)("button",{onClick:async()=>{const t={exercise:r,weight:n,reps:m,timestamp:new Date};if(s&&e)try{const s=await(0,l.gS)((0,l.rJ)(d.A,"personal_records"),{...t,userId:e.sub});x((e=>[{id:s.id,...t},...e]))}catch(a){console.error("Error saving record:",a),alert("Error saving record.")}else{const e=[{id:Date.now(),...t},...h];x(e),localStorage.setItem("personalRecords",JSON.stringify(e))}c(""),i(""),u("")},className:"w-full bg-teal-600 text-white p-2 rounded",children:"Save Record"})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("h3",{className:"text-xl font-semibold text-teal-600",children:"Saved Records"}),h.length>0&&(0,o.jsx)("button",{onClick:async()=>{if(window.confirm("Are you sure you want to delete all personal records?"))if(s&&e)try{const s=(0,l.P)((0,l.rJ)(d.A,"personal_records"),(0,l._M)("userId","==",e.sub)),r=(await(0,l.GG)(s)).docs.map((e=>(0,l.kd)((0,l.H9)(d.A,"personal_records",e.id))));await Promise.all(r),x([])}catch(r){console.error("Error deleting records:",r),alert("Error deleting records.")}else localStorage.removeItem("personalRecords"),x([])},className:"text-sm text-red-500 hover:underline",children:"Clear All"})]}),(0,o.jsx)("div",{className:"space-y-4 mt-4",children:h.length>0?h.map((e=>{var s;return(0,o.jsxs)("div",{className:"bg-gray-100 p-4 rounded-lg shadow-md",children:[(0,o.jsx)("div",{className:"text-teal-700 font-semibold",children:e.exercise}),(0,o.jsxs)("div",{className:"text-teal-500",children:["Weight: ",e.weight," | Reps: ",e.reps]}),(0,o.jsx)("div",{className:"text-sm text-gray-500",children:new Date(null!==(s=e.timestamp)&&void 0!==s&&s.seconds?1e3*e.timestamp.seconds:e.timestamp).toLocaleString()})]},e.id)})):(0,o.jsx)("p",{children:"No records found"})})]})]})}}}]);
//# sourceMappingURL=664.b1a22822.chunk.js.map